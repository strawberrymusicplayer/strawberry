cmake_minimum_required(VERSION 2.8.11)
set(CMAKE_CXX_STANDARD 11)
if(CMAKE_VERSION VERSION_GREATER_EQUAL 3.12)
  add_compile_definitions(QAPPLICATION_CLASS=QApplication)
else()
  add_definitions(-DQAPPLICATION_CLASS=QApplication)
endif()
set(SINGLEAPP-SOURCES singleapplication.cpp singleapplication_p.cpp)
set(SINGLEAPP-MOC-HEADERS singleapplication.h singleapplication_p.h)
QT5_WRAP_CPP(SINGLEAPP-SOURCES-MOC ${SINGLEAPP-MOC-HEADERS})
ADD_LIBRARY(singleapplication STATIC ${SINGLEAPP-SOURCES} ${SINGLEAPP-SOURCES-MOC})
target_link_libraries(singleapplication Qt5::Core Qt5::Widgets Qt5::Network)
include_directories(${CMAKE_BINARY_DIR}/src)
